<div class="detail-container">
  <!-- Header Section -->
  <header class="detail-header">
    <div class="header-content">
      <button class="back-button" (click)="goBackToHome()">
        <span class="back-icon">‚Üê</span>
        Back to Home
      </button>
      <h1 class="page-title">Detail Page</h1>
      <div class="product-info">
        <app-theme-toggle></app-theme-toggle>
        <span class="product-id">Product ID: {{ productId }}</span>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="detail-main">
    <!-- Date Range Filters -->
    <div class="filters-section">
      <div class="date-filters">
        <div class="date-input-group">
          <label for="startDate" class="date-label">Start Date</label>
          <input 
            id="startDate"
            type="date" 
            [(ngModel)]="startDate" 
            (change)="onDateRangeChange()"
            class="date-input"
            name="startDate"
          />
        </div>
        
        <div class="date-input-group">
          <label for="endDate" class="date-label">End Date</label>
          <input 
            id="endDate"
            type="date" 
            [(ngModel)]="endDate" 
            (change)="onDateRangeChange()"
            class="date-input"
            name="endDate"
          />
        </div>
        
        
      </div>
    </div>

    <!-- Loading State -->
    <div *ngIf="isLoading" class="loading-container">
      <div class="loading-spinner"></div>
      <p class="loading-text">Loading alerts...</p>
    </div>

    <!-- Error State -->
    <div *ngIf="errorMessage && !isLoading" class="error-container">
      <div class="error-icon">‚ö†Ô∏è</div>
      <p class="error-message">{{ errorMessage }}</p>
      <button class="retry-button" (click)="loadAlerts()">
        <span class="retry-icon">üîÑ</span>
        Try Again
      </button>
    </div>

    <!-- Data Table -->
    <div *ngIf="!isLoading && !errorMessage" class="table-container">
      <div class="table-header">
        <h2 class="table-title">Alerts ({{ totalItems }} total)</h2>
        <div class="table-info">
          <span class="page-info">Page {{ currentPage }} of {{ totalPages }}</span>
        </div>
      </div>

      <!-- Table -->
      <div class="table-wrapper">
        <table class="alerts-table">
          <thead>
            <tr>
              <th class="status-column">Status</th>
              <th class="datetime-column">Datetime</th>
              <th class="remark-column">Remark</th>
              <th class="duration-column">Duration</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let alert of alerts; let i = index" class="alert-row">
              <td class="status-cell">
                <span 
                  class="status-badge" 
                  [class.status-up]="getAlertField(alert, 'status') === 'Up'"
                  [class.status-down]="getAlertField(alert, 'status') === 'Down'"
                >
                  {{ getAlertField(alert, 'status') || 'N/A' }}
                </span>
              </td>
              <td class="datetime-cell">{{ formatDateTime(getAlertField(alert, 'datetime')) }}</td>
              <td class="remark-cell">{{ getAlertField(alert, 'remark') || 'N/A' }}</td>
              <td class="duration-cell">{{ formatDuration(getAlertField(alert, 'duration')) }}</td>
            </tr>
          </tbody>
        </table>

        <!-- Empty State -->
        <div *ngIf="alerts.length === 0" class="empty-state">
          <div class="empty-icon">üìä</div>
          <p class="empty-message">No alerts found for the selected date range</p>
          <p class="empty-submessage">Data is available from 25th January 2022 ‚Äì 16th February 2022</p>
        </div>
      </div>

      <!-- Pagination -->
      <div *ngIf="totalPages > 1" class="pagination-container">
        <div class="pagination">
          <!-- First Page -->
          <button 
            class="pagination-button first-page"
            (click)="goToFirstPage()"
            [disabled]="currentPage === 1"
            title="First page"
          >
            &laquo;&laquo;
          </button>
          
          <!-- Previous Page -->
          <button 
            class="pagination-button prev-page"
            (click)="goToPreviousPage()"
            [disabled]="currentPage === 1"
            title="Previous page"
          >
            &laquo;
          </button>
          
          <!-- Page Numbers -->
          <button 
            *ngFor="let page of getPageNumbers()"
            class="pagination-button page-number"
            [class.active]="page === currentPage"
            (click)="goToPage(page)"
            [title]="'Go to page ' + page"
          >
            {{ page }}
          </button>
          
          <!-- Next Page -->
          <button 
            class="pagination-button next-page"
            (click)="goToNextPage()"
            [disabled]="currentPage === totalPages"
            title="Next page"
          >
            &raquo;
          </button>
          
          <!-- Last Page -->
          <button 
            class="pagination-button last-page"
            (click)="goToLastPage()"
            [disabled]="currentPage === totalPages"
            title="Last page"
          >
            &raquo;&raquo;
          </button>
        </div>
        
        <!-- Pagination Info -->
        <div class="pagination-info">
          <span>Showing {{ (currentPage - 1) * pageSize + 1 }} to {{ getEndItemNumber() }} of {{ totalItems }} entries</span>
        </div>
      </div>
    </div>
  </main>
</div>
